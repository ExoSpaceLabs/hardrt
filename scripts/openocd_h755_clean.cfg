# ST-LINK over SWD (HLA)
source [find interface/stlink.cfg]
transport select hla_swd

# H7 dual-bank target
source [find target/stm32h7x_dual_bank.cfg]

# Do NOT assert SRST during examine; H7 can't read DBGMCU then.
# Option A (recommended): no reset during connect
reset_config srst_only srst_nogate

# Conservative speed
adapter speed 1000

# Helper: halt CM7; CM4 isn't exposed under HLA anyway
proc halt_m7 {} {
targets stm32h7x.cpu0
halt
}
init
